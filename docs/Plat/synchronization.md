---
sidebar_label: "同期処理"
sidebar_position: 14
---

# 同期処理

[//]: # (<!-- 概要説明)
記名記録管理システムは医療機関内（以下、ローカル)と、クラウド（以下、リモート）に記録を保管する。
これにより大規模災害時やリモートとのネットワーク遮断時にも、ローカルにアクセスを行うことで、記名記録の管理が行える方針とする。

## 1. 同期される情報
- PLATユーザ情報
- 患者情報
- スタッフ情報
- アカウント情報(keycloak)
- 文書情報

## 2. 同期タイミング
特定のAPIを実行したタイミングで同期処理が行われる。
### ローカル→リモート連携が実行されるAPI
1. PLATユーザ情報
   - PRV_USR_001【登録】ユーザ情報（医療機関用）  
2. 患者情報 
   - PRV_PAT_001【登録】PLAT 患者情報（医療機関用）
3. スタッフ情報 
   - PRV_STF_001【登録】スタッフ情報
   - PRV_STF_003【登録】スタッフ情報（認証情報まで一括登録）
4. 認証用アカウント(keycloak)情報
   - PRV_ATH_001【更新】認証情報管理（医療機関用）
5. 文書情報
   - PRV_DOC_006【登録】特定文書　（※一括登録含む）（医療機関用）
   - PRV_DOC_007【更新】特定文書　（※一括更新含む）（医療機関用）
   - PRV_DOC_008【削除】特定文書　（※一括削除含む）（医療機関用）
   - PRV_DOC_009【明示的承認】文書の承認　（※一括承認含む）

### リモート→ローカル連携が実行されるAPI
1. PLATユーザ情報
   - PRV_USR_001【登録】ユーザ情報（医療機関用）
2. 患者情報
   - PRV_PAT_001【登録】PLAT 患者情報（医療機関用）
3. スタッフ情報
   - PRV_STF_001【登録】スタッフ情報
   - PRV_STF_003【登録】スタッフ情報（認証情報まで一括登録）
4. 認証用アカウント(keycloak)情報
   - PRV_ATH_001【更新】認証情報管理（医療機関用）
5. 文書情報
   - PRV_DOC_006【登録】特定文書　（※一括登録含む）（医療機関用）
   - PRV_DOC_007【更新】特定文書　（※一括更新含む）（医療機関用）
   - PRV_DOC_008【削除】特定文書　（※一括削除含む）（医療機関用）
   - PRV_DOC_009【明示的承認】文書の承認　（※一括承認含む）

## 3. 各APIのデータ連携先
### ローカル→リモート連携

| | API名 | ローカルMETA | ローカル自医療機関FRUCtoS | ローカルKeycloak | リモートMETA | リモート自医療機関FRUCtoS | リモート患者管理FRUCtoS | リモートKeycloak |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|ユーザ管理|PRV_USR_001【登録】ユーザ情報（医療機関用）|○|○| |○|○|○| |
|患者管理|PRV_PAT_001【登録】PLAT 患者情報（医療機関用）|○|○| |○|○| | |
|スタッフ管理|PRV_STF_001【登録】スタッフ情報|○| | |○| | | |
| |PRV_STF_003【登録】スタッフ情報（認証情報まで一括登録）|○| |○|○| | |○|
|認証用アカウント(keycloak)情報|PRV_ATH_001【更新】認証情報管理（医療機関用）| | |○| | | |○|
|文書管理|PRV_DOC_006【登録】特定文書　（※一括登録含む）（医療機関用）|○|○| |○|○| | |
| |PRV_DOC_007【更新】特定文書　（※一括更新含む）（医療機関用）|○|○| |○|○| | |
| |PRV_DOC_008【削除】特定文書　（※一括削除含む）（医療機関用）|○|○| |○|○| | |
| |PRV_DOC_009【明示的承認】文書の承認　（※一括承認含む）|○|○| |○|○|○| |

### リモート→ローカル連携

| | API名 | リモートMETA | リモート自医療機関FRUCtoS | リモート患者管理FRUCtoS | リモートKeycloak | ローカルMETA | ローカル医療機関FRUCtoS |ローカルKeycloak |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|ユーザ管理|PRV_USR_001【登録】ユーザ情報（医療機関用）|○|○|○| |○|○| |
|患者管理|PRV_PAT_001【登録】PLAT 患者情報（医療機関用）|○|○| | |○|○| |
|スタッフ管理|PRV_STF_001【登録】スタッフ情報|○| | | |○| | |
| |PRV_STF_003【登録】スタッフ情報（認証情報まで一括登録）|○| | |○|○| |○|
|認証用アカウント(keycloak)情報|PRV_ATH_001【更新】認証情報管理（医療機関用）| | | |○| | |○|
|文書管理|PRV_DOC_006【登録】特定文書　（※一括登録含む）（医療機関用）|○|○| | |○|○| |
| |PRV_DOC_007【更新】特定文書　（※一括更新含む）（医療機関用）|○|○| | |○|○| |
| |PRV_DOC_008【削除】特定文書　（※一括削除含む）（医療機関用）|○|○| | |○|○| |
| |PRV_DOC_009【明示的承認】文書の承認　（※一括承認含む）|○|○|○| |○|○| |



説明 -->
